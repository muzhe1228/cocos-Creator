webpackJsonp([29],{"45OL":function(t,e,s){"use strict";var i=s("Dd8w"),a=s.n(i),n=s("Xxa5"),o=s.n(n),r=s("exGp"),c=s.n(r),l=s("rPHh"),d=s("NYxO");e.a={scrollToTop:!0,head:function(){return{title:"消息中心----聚合全球行情,挖掘数据价值-CoinLa",meta:[{hid:"keywords",name:"keywords",content:"数字货币行情, 虚拟币行情, 数字货币数据分析, 数字货币行业大数据, 虚拟币数据分析,区块链"},{hid:"description",name:"description",content:"考拉行情(www.coinla.com) 是最专业的数字货币行业大数据平台之一,专注于为数字货币用户提供数据分析,数据挖掘服务。我们拥有全球1000多个数字货币,150多家交易平台,5千多个交易对的数据资源,提供最专业的数字货币趋势分析,行情分析等多维度,全方位的分析服务,数字货币账本服务"}],link:[{rel:"index",href:"http://www.coinla.com"}]}},asyncData:function(){var t=c()(o.a.mark(function t(e){var s=e.store,i=e.error;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(l.e)("/message/findList",{pageSize:10},s.state.Token).then(function(t){var e=t.data.code;return 0===e?{msgList:t.data.data}:20===e?(s.commit("setLogin",!0),{msgList:{}}):void 0}).catch(function(t){i({statusCode:505,message:t.message})}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),computed:a()({},Object(d.mapState)(["userMsg","Token"])),data:function(){return{mainLoading:!1,singleMsg:!0,singleData:{}}},mounted:function(){this.$ToSeo()},methods:{getMsg:function(t){var e=this;this.mainLoading=!0,Object(l.e)("/message/findList",{page:t},this.Token).then(function(t){e.mainLoading=!1;var s=t.data.code;0===s?e.msgList=t.data.data:20===s&&(e.$store.commit("setLogin",!0),e.msgList={})}).catch(function(t){e.mainLoading=!1})},handleCurrentChange:function(t){this.getMsg(t),this.$ScrollTop()},msgDetails:function(t){this.singleData=t,this.singleMsg=!1,this.$ScrollTop()},deleteMsg:function(t){var e=this;this.mainLoading=!0,Object(l.e)("/message/deleteMessage",{mcrId:t},this.Token).then(function(t){e.mainLoading=!1;var s=t.data.code;if(0===s){var i=e.msgList.pageNum;e.msgList.pageNum*e.msgList.pageSize+1===e.msgList.total&&(i-=1),e.getMsg(i);var a={token:e.Token};e.$store.dispatch("SET_userMsg",a)}else 20===s&&(e.$store.commit("setLogin",!0),e.msgList={})}).catch(function(t){e.mainLoading=!1})},emptyMsg:function(){var t=this;this.mainLoading=!0,Object(l.e)("/message/deleteUserMessage",{},this.Token).then(function(e){t.mainLoading=!1;var s=e.data.code;if(0===s){t.getMsg(1);var i={token:t.Token};t.$store.dispatch("SET_userMsg",i)}else 20===s&&(t.$store.commit("setLogin",!0),t.msgList={})}).catch(function(e){t.mainLoading=!1})},updateMsg:function(t){var e=this;Object(l.e)("/message/updateUserMessage",{mcrIds:t},this.Token).then(function(t){var s=t.data.code;if(0===s){e.getMsg(1);var i={token:e.Token};e.$store.dispatch("SET_userMsg",i)}else 20===s&&(e.$store.commit("setLogin",!0),e.msgList={})})},clickMsg:function(t,e,s,i){i||this.updateMsg(s),this.$router.push("/Optional/"+e+"/?cerId="+t)}}}},KrUZ:function(t,e,s){t.exports=s.p+"img/noData.240e7a6.png"},L6Sb:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,'@media (-webkit-min-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5){.border-1px[data-v-2d20bbd4]:after{-webkit-transform:scaleY(.7);transform:scaleY(.7)}}@media (-webkit-min-device-pixel-ratio:2),(min-device-pixel-ratio:2){.border-1px[data-v-2d20bbd4]:after{-webkit-transform:scaleY(.5);transform:scaleY(.5)}}.user-msg[data-v-2d20bbd4]{background-color:#fff;min-height:80vh}.user-msg .msg-nav[data-v-2d20bbd4]{font-size:16px;height:60px;border-bottom:1px solid #eaeaea;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 45px;position:relative}.user-msg .msg-nav[data-v-2d20bbd4]:after{content:" ";position:absolute;top:0;left:0;width:3px;height:100%;background-color:#debd63}.user-msg .msg-nav .allRead[data-v-2d20bbd4]{margin-left:20px}.user-msg .msg-nav .return[data-v-2d20bbd4]{font-size:14px;color:#666;cursor:pointer}.user-msg .msg-cont .list ul[data-v-2d20bbd4]{height:120px;padding:24px 45px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;border-bottom:1px solid #eaeaea;position:relative}.user-msg .msg-cont .list ul[data-v-2d20bbd4]:last-child{border-color:transparent}.user-msg .msg-cont .list ul.active[data-v-2d20bbd4]:after{content:" ";position:absolute;width:8px;height:8px;border-radius:4px;background-color:red;left:25px;top:37px}.user-msg .msg-cont .list ul .msg-cont_l[data-v-2d20bbd4]{width:520px;margin-right:98px;cursor:pointer}.user-msg .msg-cont .list ul .msg-cont_l p[data-v-2d20bbd4]:first-child{margin-bottom:20px;color:#454545}.user-msg .msg-cont .list ul .msg-cont_l p[data-v-2d20bbd4]:nth-child(2){font-size:14px;line-height:26px;color:#999}.user-msg .msg-cont .list ul .msg-cont_r[data-v-2d20bbd4]{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.user-msg .msg-cont .list ul .msg-cont_r p[data-v-2d20bbd4]{text-align:right;font-size:14px}.user-msg .msg-cont .list ul .msg-cont_r p[data-v-2d20bbd4]:first-child{color:#999}.user-msg .msg-cont .list ul .msg-cont_r p[data-v-2d20bbd4]:nth-child(2){color:#3695ff;text-decoration:underline;cursor:pointer}.user-msg .msg-cont .list ul .msg-cont_r p[data-v-2d20bbd4]:nth-child(3){color:#666;-webkit-transition:all .2s linear;transition:all .2s linear;cursor:pointer}.user-msg .msg-cont .list ul .msg-cont_r p[data-v-2d20bbd4]:nth-child(3):hover{color:#debd63}.user-msg .msg-cont .oneList[data-v-2d20bbd4]{padding:0 45px;text-align:center;font-size:14px}.user-msg .msg-cont .oneList .title[data-v-2d20bbd4]{margin-top:34px;font-size:16px}.user-msg .msg-cont .oneList .time[data-v-2d20bbd4]{margin-top:16px;color:#999}.user-msg .msg-cont .oneList .content[data-v-2d20bbd4]{margin-top:27px;color:#666;line-height:32px}',""])},RsqK:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-msg"},[i("div",{staticClass:"msg-nav"},[i("p",[t._v("消息中心 "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.singleMsg,expression:"!singleMsg"}]},[t._v(" > 消息详情")])]),t.singleMsg?i("p",[t.msgList.total?i("el-button",{staticClass:"emptyMsg",attrs:{size:"small"},on:{click:t.emptyMsg}},[t._v("清空消息")]):t._e(),t.msgList.total?i("el-button",{staticClass:"allRead",attrs:{size:"small"},on:{click:function(e){t.updateMsg(0)}}},[t._v("全部已读")]):t._e()],1):i("p",{staticClass:"return",on:{click:function(e){t.singleMsg=!0}}},[t._v("返回当前列表")])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.mainLoading,expression:"mainLoading"}],staticClass:"msg-cont resetLoading",attrs:{"element-loading-text":"数据加载中，请耐心等待","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.singleMsg,expression:"singleMsg"}]},[t.msgList.total?i("div",{staticClass:"list"},[t._l(t.msgList.list,function(e,s){return i("ul",{key:s,class:{active:!e.isRead}},[i("li",{staticClass:"msg-cont_l",attrs:{data:e},on:{click:function(s){t.clickMsg(e.cerId,e.currencyId,e.mcrId,e.isRead)}}},[i("p",[t._v(t._s(e.title))]),i("p",[t._v(t._s(e.content))])]),i("li",{staticClass:"msg-cont_r"},[i("p",[t._v(t._s(t._f("resetTime")(e.createDate,1)))]),i("p",{on:{click:function(s){t.deleteMsg(e.mcrId)}}},[t._v("删除")]),i("p",{staticClass:"more",on:{click:function(s){t.msgDetails(e)}}},[t._v("消息详情")])])])}),t.msgList.total>t.msgList.pageSize?i("div",{staticClass:"page"},[i("el-pagination",{attrs:{background:"","page-size":t.msgList.pageSize,"pager-count":5,layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页",total:t.msgList.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],2):i("img",{staticClass:"noDataImg",attrs:{src:s("KrUZ"),alt:""}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.singleMsg,expression:"!singleMsg"}]},[t.singleData?i("ul",{staticClass:"oneList"},[i("li",{staticClass:"title"},[t._v(t._s(t.singleData.title))]),i("li",{staticClass:"time"},[t._v(t._s(t._f("resetTime")(t.singleData.createDate,1)))]),i("li",{staticClass:"content"},[t._v(t._s(t.singleData.content))])]):t._e()])])])};i._withStripped=!0;var a={render:i,staticRenderFns:[]};e.a=a},ozAD:function(t,e,s){var i=s("L6Sb");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("6bf17936",i,!1,{sourceMap:!1})},rqSt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("45OL"),a=s("RsqK"),n=!1;var o=function(t){n||s("ozAD")},r=s("VU/8")(i.a,a.a,!1,o,"data-v-2d20bbd4",null);r.options.__file="pages\\user\\msg.vue",e.default=r.exports}});