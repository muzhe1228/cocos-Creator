webpackJsonp([21],{"8EqQ":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("ZR4d"),i=e("dfSu"),n=e("9NWf"),o={name:"getGroupAward",metaInfo:{title:"获取奖励"},data:function(){return{awardsName:this.$route.params.awardsName,downloadAppLead:!1,codeData:"",wxGroupData:"",memberList:[],errorImg:"this.onerror=null;this.src='/static/images/billboard/coinla.png'",userPic:"",userNick:"",userAwardsName:"",isDisabled:!1,bindData:{account:"",captcha:"",client:0,recommendCode:this.$route.query.inviteCode},captchaText:"获取验证码",showAccountToast:!1}},mounted:function(){this.selectGroup()},methods:{getcaptcha:function(){var a=this,t=s.a.phoneEmail(this.bindData.account);t?this.$toast({message:t,duration:1500}):Object(n.a)("/captcha/sms",{account:this.bindData.account,type:1}).then(function(t){if(0==t.data.code){a.$toast({message:"验证码已发送",duration:1500});var e=null,s=a,i=60;s.captchaText=i+"S",s.isDisabled=!0,e=setInterval(function(){i-=1,s.captchaText=i+"s",i<=0&&(s.isDisabled=!1,s.captchaText="获取验证码",clearInterval(e))},1e3)}else a.$toast({message:t.data.code<0?"失败":t.message,duration:1500})}).catch(function(a){})},bindAccount:function(){var a=this,t=s.a.phoneEmail(this.bindData.account),e=s.a.captcha(this.bindData.captcha);t?this.$toast({message:t,duration:1500}):e?this.$toast({message:e,duration:1500}):Object(n.a)("/user/login/registerOrLogin",this.bindData).then(function(t){var e=t.data.data;0==t.data.code?(a.wxHeadersData=e,a.$toast({message:"绑定成功",duration:1500}),a.showAccountToast=!1,getCoinlaToken("/user/wechatCheck",{},a.wxHeadersData).then(function(t){0==t.data.code?(a.wxBind=!1,a.shadow=!1,a.downloadShadow=!1,getCoinlaToken("/groupActivity/updateReceiveState",{activityId:2,infoId:a.$route.query.infoId||a.$route.params.infoId,uuid:a.wxGroupData.uuid},a.wxHeadersData).then(function(t){var e=t.data.data;a.awardsNumberToast=!0,a.shadow=!0,a.openStatus=!1,a.awardsNumber=e.awardsNumber,a.awardsType=e.awardsType,a.awardsName=e.awardsName}).catch(function(t){a.$toast({message:"失败",duration:1500})})):(a.wxBind=!0,a.shadow=!0)})):a.$toast({message:t.data.code<0?"失败":t.data.message,duration:1500})}).catch(function(a){})},changeInfo:function(a){var t=s.a.phoneEmail(this.bindData.account),e=s.a.captcha(this.bindData.captcha);"account"==a?t&&this.$toast({message:t,duration:1500}):e&&this.$toast({message:e,duration:1500})},hideFunc:function(a){event.currentTarget==event.target&&("showAccountToast"==a?this.showAccountToast=!1:"downloadShadow"==a&&(this.downloadShadow=!1))},groupAward:function(){this.$router.push({name:"groupAward",params:{uuid:this.$route.params.uuid,awardsName:this.$route.params.awardsName,infoId:this.$route.params.infoId,headersToken:this.$route.params.headersToken}})},download:function(){if(Object(i.a)())window.location.href="https://itunes.apple.com/cn/app/coinla/id1359706851?mt=8";else{var a=navigator.userAgent.toLowerCase();"micromessenger"==a.match(/MicroMessenger/i)||"qq"==a.match(/QQ/i)?this.downloadAppLead=!0:window.location.href="https://api.coinla.com/download/android"}},selectGroupNum:function(){var a=this;this.$route.params.headersToken?getCoinlaToken("/groupActivity/selectGroupNumber",{activityId:2},this.$route.params.headersToken).then(function(t){t.data.data<10?a.organizeGroup():a.$toast({message:"发团次数超过10次不可再发团",duration:1500})}).catch(function(t){a.$toast({message:"失败",duration:1500})}):this.showAccountToast=!0},organizeGroup:function(){var a=this;getCoinlaToken("/groupActivity/insertGroup",{activityId:2,uuid:this.$route.params.uuid},this.$route.params.headersToken).then(function(t){var e=t.data.data;a.$router.push({name:"group",params:{infoId:e.infoId}})}).catch(function(t){a.$toast({message:"失败",duration:1500})})},selectGroup:function(){var a=this;Object(n.a)("/groupActivity/selectGroup",postData).then(function(t){var e=a,s=t.data.data;if(0==t.data.code){e.memberList=s.memberList;for(var i=s.memberList,n=0,o=s.memberList.length;n<o;n++)if(i[n].uuid==a.$route.params.uuid)return a.userNick=i[n].nick,a.userPic=i[n].pic,a.userAwardsName=i[n].awardsName,!1}else a.$toast({message:t.data.message,duration:1500})}).catch(function(a){})}}},c={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"get_group_award"},[e("div",{staticClass:"userInfo"},[e("img",{attrs:{src:a.userPic,alt:""}}),a._v(" "),e("p",[a._v(a._s(a.userNick))])]),a._v(" "),e("div",{staticClass:"award_number"},[a._v("\n    +"),e("span",[a._v(a._s(a.userAwardsName))])]),a._v(" "),e("p",{staticClass:"notice"},[a._v("恭喜您组团成功，奖励可在考拉APP中查看")]),a._v(" "),e("div",{staticClass:"member_award_list"},a._l(a.memberList,function(t,s){return e("div",{staticClass:"member_award"},[e("div",{staticClass:"member"},[e("p",{directives:[{name:"show",rawName:"v-show",value:0==t.memberType,expression:"item.memberType == 0"}],staticClass:"captain"},[a._v("团长")]),a._v(" "),e("img",{attrs:{src:t.pic,alt:"",onerror:a.errorImg}}),a._v(" "),e("p",{staticClass:"nick"},[a._v(a._s(t.nick))])]),a._v(" "),e("div",{staticClass:"number"},[e("span",[a._v(a._s(0==t.receiveState?"未领取":t.awardsName))])])])})),a._v(" "),e("div",{staticClass:"see_award_list_text",on:{click:a.groupAward}},[a._v("\n    查看奖励记录\n    "),e("img",{attrs:{src:"/static/images/group/symbol.png",alt:""}})]),a._v(" "),e("div",{staticClass:"btn"},[e("p",{staticClass:"group_btn",on:{click:a.selectGroupNum}},[a._v("我要组团")]),a._v(" "),e("p",{staticClass:"download_btn",on:{click:function(t){a.download()}}},[a._v("下载考拉行情APP")])]),a._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:a.showAccountToast,expression:"showAccountToast"}],staticClass:"shadow_wrap",on:{click:function(t){a.hideFunc("showAccountToast")}}},[e("div",{staticClass:"bind_app_toast",on:{click:function(a){}}},[e("h3",[a._v("绑定卡拉行情账号")]),a._v(" "),e("div",{staticClass:"userMessage"},[e("div",{staticClass:"account"},[a._m(0),a._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.bindData.account,expression:"bindData.account"}],attrs:{type:"text",placeholder:"输入手机号或邮箱"},domProps:{value:a.bindData.account},on:{change:function(t){a.changeInfo("account")},input:function(t){t.target.composing||a.$set(a.bindData,"account",t.target.value)}}})]),a._v(" "),e("div",{staticClass:"captcha"},[e("span",{staticClass:"captcha_text"},[a._v("验证码 :")]),a._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.bindData.captcha,expression:"bindData.captcha"}],attrs:{type:"text",placeholder:"输入验证码"},domProps:{value:a.bindData.captcha},on:{change:function(t){a.changeInfo("captcha")},input:function(t){t.target.composing||a.$set(a.bindData,"captcha",t.target.value)}}}),a._v(" "),e("button",{attrs:{disabled:a.isDisabled},on:{click:a.getcaptcha}},[a._v(a._s(a.captchaText))])])]),a._v(" "),e("p",{staticClass:"notice_text"},[a._v("发起组团拆红包需绑定考拉行情APP账号")]),a._v(" "),e("div",{staticClass:"btn"},[e("p",{staticClass:"cancle_btn",on:{click:function(t){a.showAccountToast=!1}}},[a._v("取消")]),a._v(" "),e("p",{staticClass:"bind_btn",on:{click:a.bindAccount}},[a._v("立即绑定")])])])]),a._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:a.downloadAppLead,expression:"downloadAppLead"}],staticClass:"yd",on:{click:function(t){a.downloadAppLead=!1}}},[e("img",{attrs:{src:"/static/images/download/yd.png",alt:""}})])])},staticRenderFns:[function(){var a=this.$createElement,t=this._self._c||a;return t("span",{staticClass:"account_text"},[t("em",[this._v("账")]),t("em",[this._v("号 :")])])}]};var r=e("VU/8")(o,c,!1,function(a){e("SvzL")},"data-v-1f89e492",null);t.default=r.exports},SvzL:function(a,t){}});
//# sourceMappingURL=21.15dafa95696e15d5f6cf.js.map